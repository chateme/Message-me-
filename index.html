<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WhatsApp Nasir v85</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root { --wa-teal: #075e54; --wa-bg: #e5ddd5; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: sans-serif; }
        body { background: #d1d7db; height: 100vh; display: flex; justify-content: center; overflow: hidden; }
        #app-wrap { width: 100%; max-width: 450px; background: var(--wa-bg); height: 100vh; display: flex; flex-direction: column; position: relative; }
        
        /* Header */
        .header { background: var(--wa-teal); color: white; padding: 10px 15px; display: flex; align-items: center; gap: 12px; height: 60px; flex-shrink: 0; }
        #chat-flow { flex: 1; overflow-y: auto; padding: 12px; background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); display: flex; flex-direction: column; }
        
        /* Messages */
        .msg { position: relative; padding: 8px 10px 25px 10px; border-radius: 8px; margin-bottom: 12px; max-width: 80%; background: white; box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .sent { background: #dcf8c6; align-self: flex-end; }

        /* Location/Emoji Menus - Elevated to not cover the button */
        #loc-menu { display: none; position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); background: white; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.4); z-index: 9999; width: 240px; overflow: hidden; }
        .loc-opt { padding: 15px; border-bottom: 1px solid #eee; cursor: pointer; text-align: center; font-size: 15px; font-weight: bold; }
        .loc-opt:active { background: #f0f0f0; }

        /* Footer & Persistent Action Button */
        .footer { background: transparent; padding: 10px; display: flex; align-items: flex-end; gap: 8px; flex-shrink: 0; position: relative; z-index: 100; }
        .input-bar { flex: 1; background: white; border-radius: 25px; display: flex; align-items: center; padding: 0 10px; min-height: 50px; border: 1px solid #ccc; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        #msg-input { flex: 1; border: none; outline: none; padding: 10px 5px; font-size: 16px; background: transparent; }
        .bar-icon { color: #8696a0; font-size: 20px; padding: 8px; cursor: pointer; }
        
        /* THE BUTTON - NOW OUTSIDE AND PROTECTED */
        #action-btn { background: var(--wa-teal); color: white; width: 52px; height: 52px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0; font-size: 22px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
    </style>
</head>
<body onclick="hideMenus()">

<div id="app-wrap">
    <div class="header">
        <i class="fas fa-bars"></i>
        <div style="flex:1;">
            <h4>Ù†Ø§ØµØ± Ù…Ù…ØªØ§Ø²</h4>
            <small>Ø¢Ù† Ù„Ø§Ø¦Ù†</small>
        </div>
        <i class="fas fa-camera"></i>
    </div>

    <div id="chat-flow"></div>

    <div id="loc-menu" onclick="event.stopPropagation()">
        <div class="loc-opt" onclick="sendLoc('current')">ğŸ“ Ù…ÙˆØ¬ÙˆØ¯Û Ù„ÙˆÚ©ÛŒØ´Ù† Ø¨Ú¾ÛŒØ¬ÛŒÚº</div>
        <div class="loc-opt" onclick="sendLoc('live')">â³ Ù„Ø§Ø¦ÛŒÙˆ Ù„ÙˆÚ©ÛŒØ´Ù† (15 Ù…Ù†Ù¹)</div>
    </div>

    <div class="footer" onclick="event.stopPropagation()">
        <div class="input-bar">
            <i class="far fa-smile bar-icon" onclick="alert('Ø§ÛŒÙ…ÙˆØ¬ÛŒØ² Ø¬Ù„Ø¯ Ø¢ Ø±ÛÛ’ ÛÛŒÚº')"></i>
            <input type="text" id="msg-input" placeholder="Ù…ÛŒØ³Ø¬ Ù„Ú©Ú¾ÛŒÚº..." oninput="toggleIcons()">
            <i class="fas fa-paperclip bar-icon"></i>
            <i class="fas fa-location-dot bar-icon" onclick="toggleLoc()"></i>
            <i class="fas fa-camera bar-icon"></i>
        </div>
        <button id="action-btn" onclick="handleAction()">
            <i class="fas fa-microphone" id="mic-ico"></i>
            <i class="fas fa-paper-plane" id="send-ico" style="display:none;"></i>
        </button>
    </div>
</div>

<script>
    const inp = document.getElementById('msg-input');
    const mic = document.getElementById('mic-ico');
    const send = document.getElementById('send-ico');
    const locM = document.getElementById('loc-menu');

    function toggleIcons() {
        const hasText = inp.value.trim().length > 0;
        send.style.display = hasText ? 'block' : 'none';
        mic.style.display = hasText ? 'none' : 'block';
    }

    function toggleLoc() {
        locM.style.display = (locM.style.display === 'block') ? 'none' : 'block';
    }

    function hideMenus() {
        locM.style.display = 'none';
    }

    function handleAction() {
        if(inp.value.trim()) {
            alert("Ù…ÛŒØ³Ø¬ Ø¬Ø§ Ø±ÛØ§ ÛÛ’: " + inp.value);
            inp.value = "";
            toggleIcons();
        } else {
            alert("Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹ ÛÙˆ Ø±ÛÛŒ ÛÛ’...");
        }
    }

    function sendLoc(type) {
        alert(type + " Ù„ÙˆÚ©ÛŒØ´Ù† Ø´ÛŒØ¦Ø± Ú©Ø± Ø¯ÛŒ Ú¯Ø¦ÛŒ ÛÛ’!");
        hideMenus();
    }
</script>
</body>
    </html>
    
